{
  "finished_at": "2026-01-20T04:54:30.826175Z",
  "meta": {
    "attempt": 1,
    "request_fingerprint": "b404c4724654df9b",
    "tag": "rest_pr_files_pr2260_page1"
  },
  "request": {
    "body": null,
    "headers": {
      "Accept": "application/vnd.github+json",
      "X-GitHub-Api-Version": "2022-11-28"
    },
    "method": "GET",
    "url": "https://api.github.com/repos/openai/openai-agents-python/pulls/2260/files?per_page=100&page=1"
  },
  "response": {
    "headers": {
      "access-control-allow-origin": "*",
      "access-control-expose-headers": "ETag, Link, Location, Retry-After, X-GitHub-OTP, X-RateLimit-Limit, X-RateLimit-Remaining, X-RateLimit-Used, X-RateLimit-Resource, X-RateLimit-Reset, X-OAuth-Scopes, X-Accepted-OAuth-Scopes, X-Poll-Interval, X-GitHub-Media-Type, X-GitHub-SSO, X-GitHub-Request-Id, Deprecation, Sunset",
      "cache-control": "private, max-age=60, s-maxage=60",
      "content-length": "32192",
      "content-security-policy": "default-src 'none'",
      "content-type": "application/json; charset=utf-8",
      "date": "Tue, 20 Jan 2026 04:54:30 GMT",
      "etag": "\"703b2c8d88f08cc507c0203df89fc2ccedcdf5010a4516eb7fba3a1881840412\"",
      "github-authentication-token-expiration": "2026-02-19 04:41:20 UTC",
      "last-modified": "Fri, 16 Jan 2026 13:37:05 GMT",
      "referrer-policy": "origin-when-cross-origin, strict-origin-when-cross-origin",
      "server": "github.com",
      "strict-transport-security": "max-age=31536000; includeSubdomains; preload",
      "vary": "Accept, Authorization, Cookie, X-GitHub-OTP,Accept-Encoding, Accept, X-Requested-With",
      "x-accepted-oauth-scopes": "",
      "x-content-type-options": "nosniff",
      "x-frame-options": "deny",
      "x-github-api-version-selected": "2022-11-28",
      "x-github-media-type": "github.v3; format=json",
      "x-github-request-id": "DB1C:365621:16BEEBA:1FC8FC6:696F0A86",
      "x-oauth-scopes": "repo",
      "x-ratelimit-limit": "5000",
      "x-ratelimit-remaining": "4983",
      "x-ratelimit-reset": "1768885989",
      "x-ratelimit-resource": "core",
      "x-ratelimit-used": "17",
      "x-xss-protection": "0"
    },
    "json": [
      {
        "additions": 12,
        "blob_url": "https://github.com/openai/openai-agents-python/blob/b8a9a1e3375eeeef1284c085b9bfbe9443d4292a/docs%2Fconfig.md",
        "changes": 12,
        "contents_url": "https://api.github.com/repos/openai/openai-agents-python/contents/docs%2Fconfig.md?ref=b8a9a1e3375eeeef1284c085b9bfbe9443d4292a",
        "deletions": 0,
        "filename": "docs/config.md",
        "patch": "@@ -38,6 +38,18 @@ from agents import set_tracing_export_api_key\n set_tracing_export_api_key(\"sk-...\")\n ```\n \n+You can also set a tracing API key per run without changing the global exporter.\n+\n+```python\n+from agents import Runner, RunConfig\n+\n+await Runner.run(\n+    agent,\n+    input=\"Hello\",\n+    run_config=RunConfig(tracing={\"api_key\": \"sk-tracing-123\"}),\n+)\n+```\n+\n You can also disable tracing entirely by using the [`set_tracing_disabled()`][agents.set_tracing_disabled] function.\n \n ```python",
        "raw_url": "https://github.com/openai/openai-agents-python/raw/b8a9a1e3375eeeef1284c085b9bfbe9443d4292a/docs%2Fconfig.md",
        "sha": "7ddd1d46c1d1e32e97756c92cddf2af39dd7c6d5",
        "status": "modified"
      },
      {
        "additions": 12,
        "blob_url": "https://github.com/openai/openai-agents-python/blob/b8a9a1e3375eeeef1284c085b9bfbe9443d4292a/docs%2Ftracing.md",
        "changes": 13,
        "contents_url": "https://api.github.com/repos/openai/openai-agents-python/contents/docs%2Ftracing.md?ref=b8a9a1e3375eeeef1284c085b9bfbe9443d4292a",
        "deletions": 1,
        "filename": "docs/tracing.md",
        "patch": "@@ -121,6 +121,18 @@ agent = Agent(\n )\n ```\n \n+If you only need a different tracing key for a single run, pass it via `RunConfig` instead of changing the global exporter.\n+\n+```python\n+from agents import Runner, RunConfig\n+\n+await Runner.run(\n+    agent,\n+    input=\"Hello\",\n+    run_config=RunConfig(tracing={\"api_key\": \"sk-tracing-123\"}),\n+)\n+```\n+\n ## Notes\n - View free traces at Openai Traces dashboard.\n \n@@ -147,4 +159,3 @@ agent = Agent(\n -   [Portkey AI](https://portkey.ai/docs/integrations/agents/openai-agents)\n -   [LangDB AI](https://docs.langdb.ai/getting-started/working-with-agent-frameworks/working-with-openai-agents-sdk)\n -   [Agenta](https://docs.agenta.ai/observability/integrations/openai-agents)\n-",
        "raw_url": "https://github.com/openai/openai-agents-python/raw/b8a9a1e3375eeeef1284c085b9bfbe9443d4292a/docs%2Ftracing.md",
        "sha": "d4bd2be142886ee9c10fa5f8fb9cc388d8e892aa",
        "status": "modified"
      },
      {
        "additions": 4,
        "blob_url": "https://github.com/openai/openai-agents-python/blob/b8a9a1e3375eeeef1284c085b9bfbe9443d4292a/src%2Fagents%2F_run_impl.py",
        "changes": 4,
        "contents_url": "https://api.github.com/repos/openai/openai-agents-python/contents/src%2Fagents%2F_run_impl.py?ref=b8a9a1e3375eeeef1284c085b9bfbe9443d4292a",
        "deletions": 0,
        "filename": "src/agents/_run_impl.py",
        "patch": "@@ -107,6 +107,7 @@\n from .tracing import (\n     SpanError,\n     Trace,\n+    TracingConfig,\n     function_span,\n     get_current_trace,\n     guardrail_span,\n@@ -1515,13 +1516,15 @@ def __init__(\n         group_id: str | None,\n         metadata: dict[str, Any] | None,\n         disabled: bool,\n+        tracing: TracingConfig | None = None,\n     ):\n         self.trace: Trace | None = None\n         self.workflow_name = workflow_name\n         self.trace_id = trace_id\n         self.group_id = group_id\n         self.metadata = metadata\n         self.disabled = disabled\n+        self.tracing = tracing\n \n     def __enter__(self) -> TraceCtxManager:\n         current_trace = get_current_trace()\n@@ -1531,6 +1534,7 @@ def __enter__(self) -> TraceCtxManager:\n                 trace_id=self.trace_id,\n                 group_id=self.group_id,\n                 metadata=self.metadata,\n+                tracing=self.tracing,\n                 disabled=self.disabled,\n             )\n             self.trace.start(mark_as_current=True)",
        "raw_url": "https://github.com/openai/openai-agents-python/raw/b8a9a1e3375eeeef1284c085b9bfbe9443d4292a/src%2Fagents%2F_run_impl.py",
        "sha": "0368ffa19733c19f50b2cb025860adb67e273701",
        "status": "modified"
      },
      {
        "additions": 6,
        "blob_url": "https://github.com/openai/openai-agents-python/blob/b8a9a1e3375eeeef1284c085b9bfbe9443d4292a/src%2Fagents%2Frun.py",
        "changes": 7,
        "contents_url": "https://api.github.com/repos/openai/openai-agents-python/contents/src%2Fagents%2Frun.py?ref=b8a9a1e3375eeeef1284c085b9bfbe9443d4292a",
        "deletions": 1,
        "filename": "src/agents/run.py",
        "patch": "@@ -73,7 +73,7 @@\n )\n from .tool import Tool, dispose_resolved_computers\n from .tool_guardrails import ToolInputGuardrailResult, ToolOutputGuardrailResult\n-from .tracing import Span, SpanError, agent_span, get_current_trace, trace\n+from .tracing import Span, SpanError, TracingConfig, agent_span, get_current_trace, trace\n from .tracing.span_data import AgentSpanData\n from .usage import Usage\n from .util import _coro, _error_tracing\n@@ -226,6 +226,9 @@ class RunConfig:\n     \"\"\"Whether tracing is disabled for the agent run. If disabled, we will not trace the agent run.\n     \"\"\"\n \n+    tracing: TracingConfig | None = None\n+    \"\"\"Tracing configuration for this run.\"\"\"\n+\n     trace_include_sensitive_data: bool = field(\n         default_factory=_default_trace_include_sensitive_data\n     )\n@@ -575,6 +578,7 @@ async def run(\n             trace_id=run_config.trace_id,\n             group_id=run_config.group_id,\n             metadata=run_config.trace_metadata,\n+            tracing=run_config.tracing,\n             disabled=run_config.tracing_disabled,\n         ):\n             current_turn = 0\n@@ -902,6 +906,7 @@ def run_streamed(\n                 trace_id=run_config.trace_id,\n                 group_id=run_config.group_id,\n                 metadata=run_config.trace_metadata,\n+                tracing=run_config.tracing,\n                 disabled=run_config.tracing_disabled,\n             )\n         )",
        "raw_url": "https://github.com/openai/openai-agents-python/raw/b8a9a1e3375eeeef1284c085b9bfbe9443d4292a/src%2Fagents%2Frun.py",
        "sha": "145169f6e97657af5406c09f3383f60c928a2e17",
        "status": "modified"
      },
      {
        "additions": 2,
        "blob_url": "https://github.com/openai/openai-agents-python/blob/b8a9a1e3375eeeef1284c085b9bfbe9443d4292a/src%2Fagents%2Ftracing%2F__init__.py",
        "changes": 2,
        "contents_url": "https://api.github.com/repos/openai/openai-agents-python/contents/src%2Fagents%2Ftracing%2F__init__.py?ref=b8a9a1e3375eeeef1284c085b9bfbe9443d4292a",
        "deletions": 0,
        "filename": "src/agents/tracing/__init__.py",
        "patch": "@@ -1,5 +1,6 @@\n import atexit\n \n+from .config import TracingConfig\n from .create import (\n     agent_span,\n     custom_span,\n@@ -53,6 +54,7 @@\n     \"set_trace_processors\",\n     \"set_trace_provider\",\n     \"set_tracing_disabled\",\n+    \"TracingConfig\",\n     \"trace\",\n     \"Trace\",\n     \"SpanError\",",
        "raw_url": "https://github.com/openai/openai-agents-python/raw/b8a9a1e3375eeeef1284c085b9bfbe9443d4292a/src%2Fagents%2Ftracing%2F__init__.py",
        "sha": "fc8a7726760e0a73d43992c0618cd140ab340d2c",
        "status": "modified"
      },
      {
        "additions": 9,
        "blob_url": "https://github.com/openai/openai-agents-python/blob/b8a9a1e3375eeeef1284c085b9bfbe9443d4292a/src%2Fagents%2Ftracing%2Fconfig.py",
        "changes": 9,
        "contents_url": "https://api.github.com/repos/openai/openai-agents-python/contents/src%2Fagents%2Ftracing%2Fconfig.py?ref=b8a9a1e3375eeeef1284c085b9bfbe9443d4292a",
        "deletions": 0,
        "filename": "src/agents/tracing/config.py",
        "patch": "@@ -0,0 +1,9 @@\n+from __future__ import annotations\n+\n+from typing_extensions import TypedDict\n+\n+\n+class TracingConfig(TypedDict, total=False):\n+    \"\"\"Configuration for tracing export.\"\"\"\n+\n+    api_key: str",
        "raw_url": "https://github.com/openai/openai-agents-python/raw/b8a9a1e3375eeeef1284c085b9bfbe9443d4292a/src%2Fagents%2Ftracing%2Fconfig.py",
        "sha": "24aaa9a5fdbe15983c60d615e24ad2119df07b81",
        "status": "added"
      },
      {
        "additions": 4,
        "blob_url": "https://github.com/openai/openai-agents-python/blob/b8a9a1e3375eeeef1284c085b9bfbe9443d4292a/src%2Fagents%2Ftracing%2Fcreate.py",
        "changes": 4,
        "contents_url": "https://api.github.com/repos/openai/openai-agents-python/contents/src%2Fagents%2Ftracing%2Fcreate.py?ref=b8a9a1e3375eeeef1284c085b9bfbe9443d4292a",
        "deletions": 0,
        "filename": "src/agents/tracing/create.py",
        "patch": "@@ -4,6 +4,7 @@\n from typing import TYPE_CHECKING, Any\n \n from ..logger import logger\n+from .config import TracingConfig\n from .setup import get_trace_provider\n from .span_data import (\n     AgentSpanData,\n@@ -30,6 +31,7 @@ def trace(\n     trace_id: str | None = None,\n     group_id: str | None = None,\n     metadata: dict[str, Any] | None = None,\n+    tracing: TracingConfig | None = None,\n     disabled: bool = False,\n ) -> Trace:\n     \"\"\"\n@@ -50,6 +52,7 @@ def trace(\n         group_id: Optional grouping identifier to link multiple traces from the same conversation\n             or process. For instance, you might use a chat thread ID.\n         metadata: Optional dictionary of additional metadata to attach to the trace.\n+        tracing: Optional tracing configuration for exporting this trace.\n         disabled: If True, we will return a Trace but the Trace will not be recorded.\n \n     Returns:\n@@ -66,6 +69,7 @@ def trace(\n         trace_id=trace_id,\n         group_id=group_id,\n         metadata=metadata,\n+        tracing=tracing,\n         disabled=disabled,\n     )\n ",
        "raw_url": "https://github.com/openai/openai-agents-python/raw/b8a9a1e3375eeeef1284c085b9bfbe9443d4292a/src%2Fagents%2Ftracing%2Fcreate.py",
        "sha": "d6c517c02136dae2e7888247feb954e54a7d3efc",
        "status": "modified"
      },
      {
        "additions": 63,
        "blob_url": "https://github.com/openai/openai-agents-python/blob/b8a9a1e3375eeeef1284c085b9bfbe9443d4292a/src%2Fagents%2Ftracing%2Fprocessors.py",
        "changes": 115,
        "contents_url": "https://api.github.com/repos/openai/openai-agents-python/contents/src%2Fagents%2Ftracing%2Fprocessors.py?ref=b8a9a1e3375eeeef1284c085b9bfbe9443d4292a",
        "deletions": 52,
        "filename": "src/agents/tracing/processors.py",
        "patch": "@@ -92,62 +92,73 @@ def export(self, items: list[Trace | Span[Any]]) -> None:\n         if not items:\n             return\n \n-        if not self.api_key:\n-            logger.warning(\"OPENAI_API_KEY is not set, skipping trace export\")\n-            return\n-\n-        data = [item.export() for item in items if item.export()]\n-        payload = {\"data\": data}\n-\n-        headers = {\n-            \"Authorization\": f\"Bearer {self.api_key}\",\n-            \"Content-Type\": \"application/json\",\n-            \"OpenAI-Beta\": \"traces=v1\",\n-        }\n-\n-        if self.organization:\n-            headers[\"OpenAI-Organization\"] = self.organization\n-\n-        if self.project:\n-            headers[\"OpenAI-Project\"] = self.project\n-\n-        # Exponential backoff loop\n-        attempt = 0\n-        delay = self.base_delay\n-        while True:\n-            attempt += 1\n-            try:\n-                response = self._client.post(url=self.endpoint, headers=headers, json=payload)\n-\n-                # If the response is successful, break out of the loop\n-                if response.status_code < 300:\n-                    logger.debug(f\"Exported {len(items)} items\")\n-                    return\n+        grouped_items: dict[str | None, list[Trace | Span[Any]]] = {}\n+        for item in items:\n+            key = item.tracing_api_key\n+            grouped_items.setdefault(key, []).append(item)\n+\n+        for item_key, grouped in grouped_items.items():\n+            api_key = item_key or self.api_key\n+            if not api_key:\n+                logger.warning(\"OPENAI_API_KEY is not set, skipping trace export\")\n+                continue\n+\n+            data = [item.export() for item in grouped if item.export()]\n+            payload = {\"data\": data}\n+\n+            headers = {\n+                \"Authorization\": f\"Bearer {api_key}\",\n+                \"Content-Type\": \"application/json\",\n+                \"OpenAI-Beta\": \"traces=v1\",\n+            }\n+\n+            if self.organization:\n+                headers[\"OpenAI-Organization\"] = self.organization\n+\n+            if self.project:\n+                headers[\"OpenAI-Project\"] = self.project\n+\n+            # Exponential backoff loop\n+            attempt = 0\n+            delay = self.base_delay\n+            while True:\n+                attempt += 1\n+                try:\n+                    response = self._client.post(url=self.endpoint, headers=headers, json=payload)\n+\n+                    # If the response is successful, break out of the loop\n+                    if response.status_code < 300:\n+                        logger.debug(f\"Exported {len(grouped)} items\")\n+                        break\n+\n+                    # If the response is a client error (4xx), we won't retry\n+                    if 400 <= response.status_code < 500:\n+                        logger.error(\n+                            \"[non-fatal] Tracing client error %s: %s\",\n+                            response.status_code,\n+                            response.text,\n+                        )\n+                        break\n+\n+                    # For 5xx or other unexpected codes, treat it as transient and retry\n+                    logger.warning(\n+                        f\"[non-fatal] Tracing: server error {response.status_code}, retrying.\"\n+                    )\n+                except httpx.RequestError as exc:\n+                    # Network or other I/O error, we'll retry\n+                    logger.warning(f\"[non-fatal] Tracing: request failed: {exc}\")\n \n-                # If the response is a client error (4xx), we won't retry\n-                if 400 <= response.status_code < 500:\n+                # If we reach here, we need to retry or give up\n+                if attempt >= self.max_retries:\n                     logger.error(\n-                        f\"[non-fatal] Tracing client error {response.status_code}: {response.text}\"\n+                        \"[non-fatal] Tracing: max retries reached, giving up on this batch.\"\n                     )\n-                    return\n-\n-                # For 5xx or other unexpected codes, treat it as transient and retry\n-                logger.warning(\n-                    f\"[non-fatal] Tracing: server error {response.status_code}, retrying.\"\n-                )\n-            except httpx.RequestError as exc:\n-                # Network or other I/O error, we'll retry\n-                logger.warning(f\"[non-fatal] Tracing: request failed: {exc}\")\n-\n-            # If we reach here, we need to retry or give up\n-            if attempt >= self.max_retries:\n-                logger.error(\"[non-fatal] Tracing: max retries reached, giving up on this batch.\")\n-                return\n+                    break\n \n-            # Exponential backoff + jitter\n-            sleep_time = delay + random.uniform(0, 0.1 * delay)  # 10% jitter\n-            time.sleep(sleep_time)\n-            delay = min(delay * 2, self.max_delay)\n+                # Exponential backoff + jitter\n+                sleep_time = delay + random.uniform(0, 0.1 * delay)  # 10% jitter\n+                time.sleep(sleep_time)\n+                delay = min(delay * 2, self.max_delay)\n \n     def close(self):\n         \"\"\"Close the underlying HTTP client.\"\"\"",
        "raw_url": "https://github.com/openai/openai-agents-python/raw/b8a9a1e3375eeeef1284c085b9bfbe9443d4292a/src%2Fagents%2Ftracing%2Fprocessors.py",
        "sha": "4e28aedfcc6e5566cddc7fed52b2f0873208c716",
        "status": "modified"
      },
      {
        "additions": 9,
        "blob_url": "https://github.com/openai/openai-agents-python/blob/b8a9a1e3375eeeef1284c085b9bfbe9443d4292a/src%2Fagents%2Ftracing%2Fprovider.py",
        "changes": 9,
        "contents_url": "https://api.github.com/repos/openai/openai-agents-python/contents/src%2Fagents%2Ftracing%2Fprovider.py?ref=b8a9a1e3375eeeef1284c085b9bfbe9443d4292a",
        "deletions": 0,
        "filename": "src/agents/tracing/provider.py",
        "patch": "@@ -8,6 +8,7 @@\n from typing import Any\n \n from ..logger import logger\n+from .config import TracingConfig\n from .processor_interface import TracingProcessor\n from .scope import Scope\n from .spans import NoOpSpan, Span, SpanImpl, TSpanData\n@@ -147,6 +148,7 @@ def create_trace(\n         group_id: str | None = None,\n         metadata: dict[str, Any] | None = None,\n         disabled: bool = False,\n+        tracing: TracingConfig | None = None,\n     ) -> Trace:\n         \"\"\"Create a new trace.\"\"\"\n \n@@ -226,6 +228,7 @@ def create_trace(\n         group_id: str | None = None,\n         metadata: dict[str, Any] | None = None,\n         disabled: bool = False,\n+        tracing: TracingConfig | None = None,\n     ) -> Trace:\n         \"\"\"\n         Create a new trace.\n@@ -244,6 +247,7 @@ def create_trace(\n             group_id=group_id,\n             metadata=metadata,\n             processor=self._multi_processor,\n+            tracing_api_key=tracing.get(\"api_key\") if tracing else None,\n         )\n \n     def create_span(\n@@ -256,6 +260,7 @@ def create_span(\n         \"\"\"\n         Create a new span.\n         \"\"\"\n+        tracing_api_key: str | None = None\n         if self._disabled or disabled:\n             logger.debug(f\"Tracing is disabled. Not creating span {span_data}\")\n             return NoOpSpan(span_data)\n@@ -277,19 +282,22 @@ def create_span(\n \n             parent_id = current_span.span_id if current_span else None\n             trace_id = current_trace.trace_id\n+            tracing_api_key = current_trace.tracing_api_key\n \n         elif isinstance(parent, Trace):\n             if isinstance(parent, NoOpTrace):\n                 logger.debug(f\"Parent {parent} is no-op, returning NoOpSpan\")\n                 return NoOpSpan(span_data)\n             trace_id = parent.trace_id\n             parent_id = None\n+            tracing_api_key = parent.tracing_api_key\n         elif isinstance(parent, Span):\n             if isinstance(parent, NoOpSpan):\n                 logger.debug(f\"Parent {parent} is no-op, returning NoOpSpan\")\n                 return NoOpSpan(span_data)\n             parent_id = parent.span_id\n             trace_id = parent.trace_id\n+            tracing_api_key = parent.tracing_api_key\n \n         logger.debug(f\"Creating span {span_data} with id {span_id}\")\n \n@@ -299,6 +307,7 @@ def create_span(\n             parent_id=parent_id,\n             processor=self._multi_processor,\n             span_data=span_data,\n+            tracing_api_key=tracing_api_key,\n         )\n \n     def shutdown(self) -> None:",
        "raw_url": "https://github.com/openai/openai-agents-python/raw/b8a9a1e3375eeeef1284c085b9bfbe9443d4292a/src%2Fagents%2Ftracing%2Fprovider.py",
        "sha": "69712c0df8d61d4de1dd53b3dd8f2ce694a4399e",
        "status": "modified"
      },
      {
        "additions": 17,
        "blob_url": "https://github.com/openai/openai-agents-python/blob/b8a9a1e3375eeeef1284c085b9bfbe9443d4292a/src%2Fagents%2Ftracing%2Fspans.py",
        "changes": 17,
        "contents_url": "https://api.github.com/repos/openai/openai-agents-python/contents/src%2Fagents%2Ftracing%2Fspans.py?ref=b8a9a1e3375eeeef1284c085b9bfbe9443d4292a",
        "deletions": 0,
        "filename": "src/agents/tracing/spans.py",
        "patch": "@@ -172,6 +172,12 @@ def ended_at(self) -> str | None:\n         \"\"\"\n         pass\n \n+    @property\n+    @abc.abstractmethod\n+    def tracing_api_key(self) -> str | None:\n+        \"\"\"The API key to use when exporting this span.\"\"\"\n+        pass\n+\n \n class NoOpSpan(Span[TSpanData]):\n     \"\"\"A no-op implementation of Span that doesn't record any data.\n@@ -243,6 +249,10 @@ def started_at(self) -> str | None:\n     def ended_at(self) -> str | None:\n         return None\n \n+    @property\n+    def tracing_api_key(self) -> str | None:\n+        return None\n+\n \n class SpanImpl(Span[TSpanData]):\n     __slots__ = (\n@@ -255,6 +265,7 @@ class SpanImpl(Span[TSpanData]):\n         \"_prev_span_token\",\n         \"_processor\",\n         \"_span_data\",\n+        \"_tracing_api_key\",\n     )\n \n     def __init__(\n@@ -264,6 +275,7 @@ def __init__(\n         parent_id: str | None,\n         processor: TracingProcessor,\n         span_data: TSpanData,\n+        tracing_api_key: str | None,\n     ):\n         self._trace_id = trace_id\n         self._span_id = span_id or util.gen_span_id()\n@@ -274,6 +286,7 @@ def __init__(\n         self._error: SpanError | None = None\n         self._prev_span_token: contextvars.Token[Span[TSpanData] | None] | None = None\n         self._span_data = span_data\n+        self._tracing_api_key = tracing_api_key\n \n     @property\n     def trace_id(self) -> str:\n@@ -339,6 +352,10 @@ def started_at(self) -> str | None:\n     def ended_at(self) -> str | None:\n         return self._ended_at\n \n+    @property\n+    def tracing_api_key(self) -> str | None:\n+        return self._tracing_api_key\n+\n     def export(self) -> dict[str, Any] | None:\n         return {\n             \"object\": \"trace.span\",",
        "raw_url": "https://github.com/openai/openai-agents-python/raw/b8a9a1e3375eeeef1284c085b9bfbe9443d4292a/src%2Fagents%2Ftracing%2Fspans.py",
        "sha": "3ede9ebec6fcf05d017d5332694de63d2ef61075",
        "status": "modified"
      },
      {
        "additions": 17,
        "blob_url": "https://github.com/openai/openai-agents-python/blob/b8a9a1e3375eeeef1284c085b9bfbe9443d4292a/src%2Fagents%2Ftracing%2Ftraces.py",
        "changes": 17,
        "contents_url": "https://api.github.com/repos/openai/openai-agents-python/contents/src%2Fagents%2Ftracing%2Ftraces.py?ref=b8a9a1e3375eeeef1284c085b9bfbe9443d4292a",
        "deletions": 0,
        "filename": "src/agents/tracing/traces.py",
        "patch": "@@ -124,6 +124,12 @@ def export(self) -> dict[str, Any] | None:\n         \"\"\"\n         pass\n \n+    @property\n+    @abc.abstractmethod\n+    def tracing_api_key(self) -> str | None:\n+        \"\"\"The API key to use when exporting this trace and its spans.\"\"\"\n+        pass\n+\n \n class NoOpTrace(Trace):\n     \"\"\"A no-op implementation of Trace that doesn't record any data.\n@@ -193,6 +199,10 @@ def export(self) -> dict[str, Any] | None:\n         \"\"\"\n         return None\n \n+    @property\n+    def tracing_api_key(self) -> str | None:\n+        return None\n+\n \n NO_OP_TRACE = NoOpTrace()\n \n@@ -205,6 +215,7 @@ class TraceImpl(Trace):\n     __slots__ = (\n         \"_name\",\n         \"_trace_id\",\n+        \"_tracing_api_key\",\n         \"group_id\",\n         \"metadata\",\n         \"_prev_context_token\",\n@@ -219,9 +230,11 @@ def __init__(\n         group_id: str | None,\n         metadata: dict[str, Any] | None,\n         processor: TracingProcessor,\n+        tracing_api_key: str | None,\n     ):\n         self._name = name\n         self._trace_id = trace_id or util.gen_trace_id()\n+        self._tracing_api_key = tracing_api_key\n         self.group_id = group_id\n         self.metadata = metadata\n         self._prev_context_token: contextvars.Token[Trace | None] | None = None\n@@ -236,6 +249,10 @@ def trace_id(self) -> str:\n     def name(self) -> str:\n         return self._name\n \n+    @property\n+    def tracing_api_key(self) -> str | None:\n+        return self._tracing_api_key\n+\n     def start(self, mark_as_current: bool = False):\n         if self._started:\n             return",
        "raw_url": "https://github.com/openai/openai-agents-python/raw/b8a9a1e3375eeeef1284c085b9bfbe9443d4292a/src%2Fagents%2Ftracing%2Ftraces.py",
        "sha": "f8a75e951e5f1da08ae831fe29c96bdea92bc7e3",
        "status": "modified"
      },
      {
        "additions": 2,
        "blob_url": "https://github.com/openai/openai-agents-python/blob/b8a9a1e3375eeeef1284c085b9bfbe9443d4292a/src%2Fagents%2Fvoice%2Fpipeline.py",
        "changes": 2,
        "contents_url": "https://api.github.com/repos/openai/openai-agents-python/contents/src%2Fagents%2Fvoice%2Fpipeline.py?ref=b8a9a1e3375eeeef1284c085b9bfbe9443d4292a",
        "deletions": 0,
        "filename": "src/agents/voice/pipeline.py",
        "patch": "@@ -91,6 +91,7 @@ async def _run_single_turn(self, audio_input: AudioInput) -> StreamedAudioResult\n             trace_id=None,  # Automatically generated\n             group_id=self.config.group_id,\n             metadata=self.config.trace_metadata,\n+            tracing=self.config.tracing,\n             disabled=self.config.tracing_disabled,\n         ):\n             input_text = await self._process_audio_input(audio_input)\n@@ -119,6 +120,7 @@ async def _run_multi_turn(self, audio_input: StreamedAudioInput) -> StreamedAudi\n             trace_id=None,\n             group_id=self.config.group_id,\n             metadata=self.config.trace_metadata,\n+            tracing=self.config.tracing,\n             disabled=self.config.tracing_disabled,\n         ):\n             output = StreamedAudioResult(",
        "raw_url": "https://github.com/openai/openai-agents-python/raw/b8a9a1e3375eeeef1284c085b9bfbe9443d4292a/src%2Fagents%2Fvoice%2Fpipeline.py",
        "sha": "a89941008c91fca7025f83686326d30cd7fe62a9",
        "status": "modified"
      },
      {
        "additions": 4,
        "blob_url": "https://github.com/openai/openai-agents-python/blob/b8a9a1e3375eeeef1284c085b9bfbe9443d4292a/src%2Fagents%2Fvoice%2Fpipeline_config.py",
        "changes": 4,
        "contents_url": "https://api.github.com/repos/openai/openai-agents-python/contents/src%2Fagents%2Fvoice%2Fpipeline_config.py?ref=b8a9a1e3375eeeef1284c085b9bfbe9443d4292a",
        "deletions": 0,
        "filename": "src/agents/voice/pipeline_config.py",
        "patch": "@@ -3,6 +3,7 @@\n from dataclasses import dataclass, field\n from typing import Any\n \n+from ..tracing import TracingConfig\n from ..tracing.util import gen_group_id\n from .model import STTModelSettings, TTSModelSettings, VoiceModelProvider\n from .models.openai_model_provider import OpenAIVoiceModelProvider\n@@ -18,6 +19,9 @@ class VoicePipelineConfig:\n     tracing_disabled: bool = False\n     \"\"\"Whether to disable tracing of the pipeline. Defaults to `False`.\"\"\"\n \n+    tracing: TracingConfig | None = None\n+    \"\"\"Tracing configuration for this pipeline.\"\"\"\n+\n     trace_include_sensitive_data: bool = True\n     \"\"\"Whether to include sensitive data in traces. Defaults to `True`. This is specifically for the\n       voice pipeline, and not for anything that goes on inside your Workflow.\"\"\"",
        "raw_url": "https://github.com/openai/openai-agents-python/raw/b8a9a1e3375eeeef1284c085b9bfbe9443d4292a/src%2Fagents%2Fvoice%2Fpipeline_config.py",
        "sha": "eed2ab69407f25e24dea2f4f8fe6f88828e40247",
        "status": "modified"
      },
      {
        "additions": 2,
        "blob_url": "https://github.com/openai/openai-agents-python/blob/b8a9a1e3375eeeef1284c085b9bfbe9443d4292a/tests%2Ftest_trace_processor.py",
        "changes": 2,
        "contents_url": "https://api.github.com/repos/openai/openai-agents-python/contents/tests%2Ftest_trace_processor.py?ref=b8a9a1e3375eeeef1284c085b9bfbe9443d4292a",
        "deletions": 0,
        "filename": "tests/test_trace_processor.py",
        "patch": "@@ -20,6 +20,7 @@ def get_span(processor: TracingProcessor) -> SpanImpl[AgentSpanData]:\n         parent_id=None,\n         processor=processor,\n         span_data=AgentSpanData(name=\"test_agent\"),\n+        tracing_api_key=None,\n     )\n \n \n@@ -31,6 +32,7 @@ def get_trace(processor: TracingProcessor) -> TraceImpl:\n         group_id=\"test_session_id\",\n         metadata={},\n         processor=processor,\n+        tracing_api_key=None,\n     )\n \n ",
        "raw_url": "https://github.com/openai/openai-agents-python/raw/b8a9a1e3375eeeef1284c085b9bfbe9443d4292a/tests%2Ftest_trace_processor.py",
        "sha": "02ec1f207779c99a6fed2fc2e38f809c7bdecb97",
        "status": "modified"
      },
      {
        "additions": 7,
        "blob_url": "https://github.com/openai/openai-agents-python/blob/b8a9a1e3375eeeef1284c085b9bfbe9443d4292a/tests%2Ftest_tracing.py",
        "changes": 7,
        "contents_url": "https://api.github.com/repos/openai/openai-agents-python/contents/tests%2Ftest_tracing.py?ref=b8a9a1e3375eeeef1284c085b9bfbe9443d4292a",
        "deletions": 0,
        "filename": "tests/test_tracing.py",
        "patch": "@@ -401,3 +401,10 @@ async def test_noop_parent_is_noop_child():\n     span_2.finish()\n \n     assert span_2.export() is None\n+\n+\n+def test_trace_and_spans_use_tracing_config_key():\n+    with trace(workflow_name=\"test\", tracing={\"api_key\": \"tracing-key\"}) as tr:\n+        assert tr.tracing_api_key == \"tracing-key\"\n+        with custom_span(name=\"span_with_key\") as span:\n+            assert span.tracing_api_key == \"tracing-key\"",
        "raw_url": "https://github.com/openai/openai-agents-python/raw/b8a9a1e3375eeeef1284c085b9bfbe9443d4292a/tests%2Ftest_tracing.py",
        "sha": "c409120a5a815998a19be134d2256c1c61c56fdf",
        "status": "modified"
      },
      {
        "additions": 50,
        "blob_url": "https://github.com/openai/openai-agents-python/blob/b8a9a1e3375eeeef1284c085b9bfbe9443d4292a/tests%2Ftracing%2Ftest_processor_api_key.py",
        "changes": 50,
        "contents_url": "https://api.github.com/repos/openai/openai-agents-python/contents/tests%2Ftracing%2Ftest_processor_api_key.py?ref=b8a9a1e3375eeeef1284c085b9bfbe9443d4292a",
        "deletions": 0,
        "filename": "tests/tracing/test_processor_api_key.py",
        "patch": "@@ -1,6 +1,13 @@\n+from __future__ import annotations\n+\n+from types import SimpleNamespace\n+from typing import Any, Union, cast\n+\n import pytest\n \n from agents.tracing.processors import BackendSpanExporter\n+from agents.tracing.spans import Span\n+from agents.tracing.traces import Trace\n \n \n @pytest.mark.asyncio\n@@ -25,3 +32,46 @@ async def test_processor_api_key_from_env(monkeypatch):\n     # If we set it afterwards, it should be the new value\n     monkeypatch.setenv(\"OPENAI_API_KEY\", \"foo_bar_123\")\n     assert processor.api_key == \"foo_bar_123\"\n+\n+\n+def test_exporter_uses_item_api_keys(monkeypatch):\n+    class DummyItem:\n+        def __init__(self, key: str | None, payload: dict[str, str]):\n+            self.tracing_api_key = key\n+            self._payload = payload\n+\n+        def export(self) -> dict[str, str]:\n+            return self._payload\n+\n+    calls: list[dict[str, Any]] = []\n+\n+    def fake_post(*, url, headers, json):\n+        calls.append({\"url\": url, \"headers\": headers, \"json\": json})\n+        return SimpleNamespace(status_code=200, text=\"ok\")\n+\n+    exporter = BackendSpanExporter()\n+    exporter.set_api_key(\"global-key\")\n+    monkeypatch.setattr(exporter, \"_client\", SimpleNamespace(post=fake_post))\n+\n+    exporter.export(\n+        cast(\n+            list[Union[Trace, Span[Any]]],\n+            [\n+                DummyItem(\"key-a\", {\"id\": \"a\"}),\n+                DummyItem(None, {\"id\": \"b\"}),\n+                DummyItem(\"key-b\", {\"id\": \"c\"}),\n+            ],\n+        )\n+    )\n+\n+    assert len(calls) == 3\n+    auth_by_first_item = {\n+        tuple(entry[\"id\"] for entry in call[\"json\"][\"data\"]): call[\"headers\"][\"Authorization\"]\n+        for call in calls\n+    }\n+    assert (\"a\",) in auth_by_first_item\n+    assert (\"b\",) in auth_by_first_item\n+    assert (\"c\",) in auth_by_first_item\n+    assert auth_by_first_item[(\"a\",)] == \"Bearer key-a\"\n+    assert auth_by_first_item[(\"c\",)] == \"Bearer key-b\"\n+    assert auth_by_first_item[(\"b\",)] == \"Bearer global-key\"",
        "raw_url": "https://github.com/openai/openai-agents-python/raw/b8a9a1e3375eeeef1284c085b9bfbe9443d4292a/tests%2Ftracing%2Ftest_processor_api_key.py",
        "sha": "e725cf355aba49e0a8a3d9aa4220bc0574e6f3a7",
        "status": "modified"
      }
    ],
    "status": 200
  },
  "started_at": "2026-01-20T04:54:30.316052Z"
}
