{
  "finished_at": "2026-01-20T04:54:46.630989Z",
  "meta": {
    "attempt": 1,
    "request_fingerprint": "2aac5c96b148910a",
    "tag": "graphql_comments_item2266_pcced28c6"
  },
  "request": {
    "body": {
      "query": "query GetItemCommentsPage($owner: String!, $name: String!, $number: Int!, $after: String) {\n  repository(owner: $owner, name: $name) {\n    issueOrPullRequest(number: $number) {\n      __typename\n      ... on Issue {\n        comments(first: 100, after: $after) {\n          pageInfo { hasNextPage endCursor }\n          nodes {\n            id\n            databaseId\n            url\n            body\n            createdAt\n            updatedAt\n            author {\n              __typename\n              login\n              url\n              avatarUrl\n              ... on User { id databaseId }\n              ... on Organization { id databaseId }\n              ... on Bot { id databaseId }\n              ... on Mannequin { id databaseId }\n            }\n            authorAssociation\n          }\n        }\n      }\n      ... on PullRequest {\n        comments(first: 100, after: $after) {\n          pageInfo { hasNextPage endCursor }\n          nodes {\n            id\n            databaseId\n            url\n            body\n            createdAt\n            updatedAt\n            author {\n              __typename\n              login\n              url\n              avatarUrl\n              ... on User { id databaseId }\n              ... on Organization { id databaseId }\n              ... on Bot { id databaseId }\n              ... on Mannequin { id databaseId }\n            }\n            authorAssociation\n          }\n        }\n      }\n    }\n  }\n}",
      "variables": {
        "after": null,
        "name": "openai-agents-python",
        "number": 2266,
        "owner": "openai"
      }
    },
    "headers": {
      "Accept": "application/vnd.github+json",
      "Content-Type": "application/json",
      "X-GitHub-Api-Version": "2022-11-28"
    },
    "method": "POST",
    "url": "https://api.github.com/graphql"
  },
  "response": {
    "headers": {
      "access-control-allow-origin": "*",
      "access-control-expose-headers": "ETag, Link, Location, Retry-After, X-GitHub-OTP, X-RateLimit-Limit, X-RateLimit-Remaining, X-RateLimit-Used, X-RateLimit-Resource, X-RateLimit-Reset, X-OAuth-Scopes, X-Accepted-OAuth-Scopes, X-Poll-Interval, X-GitHub-Media-Type, X-GitHub-SSO, X-GitHub-Request-Id, Deprecation, Sunset",
      "content-length": "12287",
      "content-security-policy": "default-src 'none'",
      "content-type": "application/json; charset=utf-8",
      "date": "Tue, 20 Jan 2026 04:54:46 GMT",
      "github-authentication-token-expiration": "2026-02-19 04:41:20 UTC",
      "referrer-policy": "origin-when-cross-origin, strict-origin-when-cross-origin",
      "server": "github.com",
      "strict-transport-security": "max-age=31536000; includeSubdomains; preload",
      "vary": "Accept-Encoding, Accept, X-Requested-With",
      "x-accepted-oauth-scopes": "repo",
      "x-content-type-options": "nosniff",
      "x-frame-options": "deny",
      "x-github-media-type": "github.v4; format=json",
      "x-github-request-id": "DB3A:365621:16BF60F:1FC98D2:696F0A96",
      "x-oauth-scopes": "repo",
      "x-ratelimit-limit": "5000",
      "x-ratelimit-remaining": "4848",
      "x-ratelimit-reset": "1768888376",
      "x-ratelimit-resource": "graphql",
      "x-ratelimit-used": "152",
      "x-xss-protection": "0"
    },
    "json": {
      "data": {
        "repository": {
          "issueOrPullRequest": {
            "__typename": "Issue",
            "comments": {
              "nodes": [
                {
                  "author": {
                    "__typename": "User",
                    "avatarUrl": "https://avatars.githubusercontent.com/u/19658?u=33a7cbe96e38b9572db1046209104c5c6f19bd7c&v=4",
                    "databaseId": 19658,
                    "id": "MDQ6VXNlcjE5NjU4",
                    "login": "seratch",
                    "url": "https://github.com/seratch"
                  },
                  "authorAssociation": "MEMBER",
                  "body": "This looks like the output is trying to follow your instructions. Also, I am not sure what the \"OPENAI_GENERAL_SEARCH_DEPLOYMENT\" model is, but simple code using a foundation model\n such as https://github.com/openai/openai-agents-python/tree/main/examples/financial_research_agent works more intuitively. Please check the difference using the examples in this repo.",
                  "createdAt": "2026-01-07T08:02:59Z",
                  "databaseId": 3717736083,
                  "id": "IC_kwDOOGidp87dmCaT",
                  "updatedAt": "2026-01-07T08:02:59Z",
                  "url": "https://github.com/openai/openai-agents-python/issues/2266#issuecomment-3717736083"
                },
                {
                  "author": {
                    "__typename": "User",
                    "avatarUrl": "https://avatars.githubusercontent.com/u/164125428?v=4",
                    "databaseId": 164125428,
                    "id": "U_kgDOCcha9A",
                    "login": "Shivam-Bahuguna-Seatrium",
                    "url": "https://github.com/Shivam-Bahuguna-Seatrium"
                  },
                  "authorAssociation": "NONE",
                  "body": "Sorry My bad!  for not providing proper context earlier. I am only using GPT-5 family only.\n\nThe difference I noticed is that when I use the streamed runner, I get messy formatting. Without streaming, the output looks fine and properly formatted.\n\nBelow is some sample code demonstrating the issue.\n\n\n```python\ntry:\n   \n    # Create WebSearchTool\n    web_search_tool = WebSearchTool()\n    \n    # Create agent with web search capability using async_client\n    web_research_agent = Agent(\n        name=\"WebResearchAgent\",\n        instructions=(\n            \"You are a research assistant. \"\n            \"Use web search to find accurate, up-to-date information \"\n            \"and summarize it clearly with citations.\"\n            \"Ensure proper table formatting with markdown\"\n        ),\n        model=OpenAIResponsesModel(\n            model=\"gpt-5-mini\",\n            openai_client=async_client \n        ),\n        tools=[web_search_tool],\n        tool_use_behavior=\"run_llm_again\",\n        model_settings=ModelSettings(\n            include_usage=True,\n        )\n    )\n    \n    \n    # Run query \n    query = \"give me epl standing table\"\n\n    result = await Runner.run(web_research_agent, input=query)\n    print(\"‚úÖ Agent SDK without Streaming Test Results\")\n    print(result.final_output)\n    \n    # Use Runner.run_streamed for streaming responses\n    result_stream = Runner.run_streamed(web_research_agent, input=query)\n    print(f\"üîé Agent SDK Streaming Test Results\")\n\n    \n    accumulated_output = \"\"\n    \n    # Stream events from the agent\n    async for event in result_stream.stream_events():\n        if event.type == \"raw_response_event\":\n            # Import the type for checking\n            from openai.types.responses import ResponseTextDeltaEvent\n            \n            # Only process text delta events\n            if isinstance(event.data, ResponseTextDeltaEvent):\n                delta = getattr(event.data, \"delta\", None)\n                if delta and isinstance(delta, str):\n                    print(delta, end='', flush=True)\n                    accumulated_output += delta\n        \n    \n    elapsed_time = time.time() - start_time\n    \n    print(f\"\\n\\n{'='*80}\")\n    print(f\"‚è±Ô∏è  Execution Time: {elapsed_time:.2f}s\")\n    print(f\"üìä Output Length: {len(accumulated_output)} characters\")\n\nexcept Exception as e:\n    print(f\"‚ùå Error: {str(e)}\")\n    print(f\"   Type: {type(e).__name__}\")\n    import traceback\n    print(f\"\\n{traceback.format_exc()}\")\n```\n\n\nPRINT:\n```\n================================================================================\n‚úÖ Agent SDK without Streaming Test Results\n================================================================================\n\nHere‚Äôs the current English Premier League table (standings) as of 7 January 2026. \n\n|Pos|Team|Pld|W|D|L|GF|GA|GD|Pts|\n|---:|---|---:|---:|---:|---:|---:|---:|---:|---:|\n|1|Arsenal|20|15|3|2|40|14|+26|48|\n|2|Manchester City|20|13|3|4|44|18|+26|42|\n|3|Aston Villa|20|13|3|4|33|24|+9|42|\n|4|Liverpool|20|10|4|6|32|28|+4|34|\n|5|Chelsea|20|8|7|5|33|22|+11|31|\n|6|Manchester United|20|8|7|5|34|30|+4|31|\n|7|Brentford|20|9|3|8|32|28|+4|30|\n|8|Sunderland|20|7|9|4|21|19|+2|30|\n|9|Newcastle United|20|8|5|7|28|24|+4|29|\n|10|Brighton & Hove Albion|20|7|7|6|30|27|+3|28|\n|11|Fulham|20|8|4|8|28|29|-1|28|\n|12|Everton|20|8|4|8|22|24|-2|28|\n|13|Tottenham Hotspur|20|7|6|7|28|24|+4|27|\n|14|Crystal Palace|20|7|6|7|22|23|-1|27|\n|15|Bournemouth|20|5|8|7|31|38|-7|23|\n|16|Leeds United|20|5|7|8|26|33|-7|22|\n|17|Nottingham Forest|21|6|3|12|21|34|-13|21|\n|18|West Ham United|21|3|5|13|22|43|-21|14|\n|19|Burnley|20|3|3|14|20|39|-19|12|\n|20|Wolverhampton Wanderers|20|1|3|16|14|40|-26|6|\n\nSources: Sky Sports, ESPN, PremierLeague.com. \n\nWould you like this sorted by form, home/away records, or refreshed for live updates?[Premier League Table, Standings & Form Guide](https://www.premierleague.com/en/tables)[Premier League Table | Sky Sports](https://www.skysports.com/premier-league-table)[2025-26 English Premier League Standings - ESPN](https://www.espn.com/soccer/standings/_/league/eng.1)\n\n================================================================================\nüîé Agent SDK Streaming Test Results\n================================================================================\n\n[Premier League Table, Standings & Form Guide](https://www.premierleague.com/en/tables?competition=8&season=2025&round=L_1&matchweek=-1&ha=-1)[2025-26 English Premier League Standings - ESPN](https://www.espn.com/soccer/standings/_/league/eng.1)[Live Premier League table: 2025/26 season standings](https://www.skysports.com/football/news/11096/13382434/live-premier-league-table-2025-26-season-standings)2 |[Premier League Table, Standings & Form Guide](https://www.premierleague.com/en/tables?competition=8&season=2025&round=L_1&matchweek=-1&ha=-1)[2025-26 English Premier League Standings - ESPN](https://www.espn.com/soccer/standings/_/league/eng.1)[Live Premier League table: 2025/26 season standings](https://www.skysports.com/football/news/11096/13382434/live-premier-league-table-2025-26-season-standings)26 season standings](https://www.skysports.com/football/news/11096/13382434/live-premier-league-table-2025-26-season-standings)ndings)son-standings)andings)ndings)ings)-standings)ngs)ndings)season-standings)tandings)ndings)standings)andings)-season-standings)son-standings)ngs)andings)dings)dings)standings)eason-standings)ason-standings)andings)dings)gs)s)ndings)andings)eason-standings)tandings)ngs)s)))s))s)s))s)s)s))s)gs)gs)son-standings)ndings)andings)ings)tandings)andings)ngs)2025-26-season-standings)gs)dings)ings)andings)andings)tandings)26-season-standings)ndings)ings)ings)ings)gs)ngs)gs)ings)ings)eason-standings)gs)on-standings)eason-standings)-table-2025-26-season-standings)son-standings)25-26-season-standings)r-league-table-2025-26-season-standings)2025-26-season-standings)025-26-season-standings)tandings)ngs)standings)s)tandings)-standings)on-standings)ngs)ngs)ndings)ings)tandings)ings)ings)-season-standings)ason-standings)dings)ndings)ndings)ings)andings)andings)son-standings)26-season-standings)eason-standings)eason-standings)son-standings)dings)ings)andings)6-season-standings)n-standings)son-standings)on-standings)ings)ings)ason-standings)eason-standings)season-standings)standings)ngs)eason-standings)season-standings)son-standings)n-standings)ason-standings)tandings)\n\n================================================================================\n```",
                  "createdAt": "2026-01-07T08:33:04Z",
                  "databaseId": 3717823566,
                  "id": "IC_kwDOOGidp87dmXxO",
                  "updatedAt": "2026-01-07T09:04:33Z",
                  "url": "https://github.com/openai/openai-agents-python/issues/2266#issuecomment-3717823566"
                },
                {
                  "author": {
                    "__typename": "User",
                    "avatarUrl": "https://avatars.githubusercontent.com/u/164125428?v=4",
                    "databaseId": 164125428,
                    "id": "U_kgDOCcha9A",
                    "login": "Shivam-Bahuguna-Seatrium",
                    "url": "https://github.com/Shivam-Bahuguna-Seatrium"
                  },
                  "authorAssociation": "NONE",
                  "body": "@seratch Hey, can you suggest which event delta can help me in this case? I can see that ResponseTextDeltaEvent is having this type of issue for this case..",
                  "createdAt": "2026-01-12T00:09:02Z",
                  "databaseId": 3736472913,
                  "id": "IC_kwDOOGidp87etg1R",
                  "updatedAt": "2026-01-12T00:09:02Z",
                  "url": "https://github.com/openai/openai-agents-python/issues/2266#issuecomment-3736472913"
                },
                {
                  "author": {
                    "__typename": "User",
                    "avatarUrl": "https://avatars.githubusercontent.com/u/19658?u=33a7cbe96e38b9572db1046209104c5c6f19bd7c&v=4",
                    "databaseId": 19658,
                    "id": "MDQ6VXNlcjE5NjU4",
                    "login": "seratch",
                    "url": "https://github.com/seratch"
                  },
                  "authorAssociation": "MEMBER",
                  "body": "I am not sure if this is the right solution you need, but I just asked codex to optimize your code and here is its answer. This is indeed working. You may not need some of the changes, but you can start with this:\n\n---\nHi! I took a swing at a streaming-friendly version that keeps the URLs clean and avoids the double-LLM rewrite that caused the messy citations. Feel free to copy-paste this as-is.\n\nWhat‚Äôs different from your current approach\n- Stream as incremental text: consume ResponseTextDeltaEvent chunks and re-render a local buffer on each chunk, rather than expecting a fully formed table to arrive at once (the sync mindset).\n- Keep WebSearchTool lightweight with search_context_size=\"low\" so the table stays compact.\n- Let the tool‚Äôs message be the final table; no post-processing LLM pass.\n\nTested streaming sample (needs OPENAI_API_KEY)\nFile: tmp/demo_streaming_table.py\n\n```python\nimport asyncio\nimport sys\nfrom agents import Agent, Runner, WebSearchTool\nfrom openai.types.responses import ResponseTextDeltaEvent\n\n\ndef clear_and_render(buffer: str) -> None:\n    # Clear screen and show the current markdown table.\n    sys.stdout.write(\"\\033[2J\\033[H\")\n    print(\"Live markdown table (streaming)\\n\")\n    print(buffer)\n    sys.stdout.flush()\n\n\nasync def main() -> None:\n    agent = Agent(\n        name=\"streaming-table\",\n        instructions=(\n            \"Return a 3-row markdown table with columns: Title, Source, Link. \"\n            \"Include a single markdown link in the Link column. Keep it concise.\"\n        ),\n        model=\"gpt-5.1\",\n        tools=[WebSearchTool(search_context_size=\"low\")],\n    )\n\n    result = Runner.run_streamed(\n        agent,\n        input=\"List three positive tech news items from today with citations as a markdown table.\",\n        max_turns=2,\n    )\n\n    buffer = \"\"\n    async for event in result.stream_events():\n        if event.type == \"raw_response_event\" and isinstance(event.data, ResponseTextDeltaEvent):\n            delta = event.data.delta or \"\"\n            buffer += delta\n            if delta.strip():\n                clear_and_render(buffer)\n\n    print(\"\\nFinal output:\\n\")\n    print(result.final_output)\n\n\nif __name__ == \"__main__\":\n    asyncio.run(main())\n```\n\nRuntime behavior\n- The table ‚Äúgrows‚Äù live as text deltas arrive in the terminal.\n- Final markdown table prints at completion with clean, non-duplicated URLs.\n",
                  "createdAt": "2026-01-12T02:28:02Z",
                  "databaseId": 3736680447,
                  "id": "IC_kwDOOGidp87euTf_",
                  "updatedAt": "2026-01-12T02:28:02Z",
                  "url": "https://github.com/openai/openai-agents-python/issues/2266#issuecomment-3736680447"
                },
                {
                  "author": {
                    "__typename": "Bot",
                    "avatarUrl": "https://avatars.githubusercontent.com/in/15368?v=4",
                    "databaseId": 41898282,
                    "id": "MDM6Qm90NDE4OTgyODI=",
                    "login": "github-actions",
                    "url": "https://github.com/apps/github-actions"
                  },
                  "authorAssociation": "CONTRIBUTOR",
                  "body": "This issue is stale because it has been open for 7 days with no activity.",
                  "createdAt": "2026-01-20T02:12:54Z",
                  "databaseId": 3770710966,
                  "id": "IC_kwDOOGidp87gwHu2",
                  "updatedAt": "2026-01-20T02:12:54Z",
                  "url": "https://github.com/openai/openai-agents-python/issues/2266#issuecomment-3770710966"
                }
              ],
              "pageInfo": {
                "endCursor": "Y3Vyc29yOnYyOpHO4MB7tg==",
                "hasNextPage": false
              }
            }
          }
        }
      }
    },
    "status": 200
  },
  "started_at": "2026-01-20T04:54:46.145309Z"
}
