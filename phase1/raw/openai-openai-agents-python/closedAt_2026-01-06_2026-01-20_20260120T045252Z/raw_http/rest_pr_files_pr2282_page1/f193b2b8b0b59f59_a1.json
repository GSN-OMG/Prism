{
  "finished_at": "2026-01-20T04:55:37.995668Z",
  "meta": {
    "attempt": 1,
    "request_fingerprint": "f193b2b8b0b59f59",
    "tag": "rest_pr_files_pr2282_page1"
  },
  "request": {
    "body": null,
    "headers": {
      "Accept": "application/vnd.github+json",
      "X-GitHub-Api-Version": "2022-11-28"
    },
    "method": "GET",
    "url": "https://api.github.com/repos/openai/openai-agents-python/pulls/2282/files?per_page=100&page=1"
  },
  "response": {
    "headers": {
      "access-control-allow-origin": "*",
      "access-control-expose-headers": "ETag, Link, Location, Retry-After, X-GitHub-OTP, X-RateLimit-Limit, X-RateLimit-Remaining, X-RateLimit-Used, X-RateLimit-Resource, X-RateLimit-Reset, X-OAuth-Scopes, X-Accepted-OAuth-Scopes, X-Poll-Interval, X-GitHub-Media-Type, X-GitHub-SSO, X-GitHub-Request-Id, Deprecation, Sunset",
      "cache-control": "private, max-age=60, s-maxage=60",
      "content-length": "5044",
      "content-security-policy": "default-src 'none'",
      "content-type": "application/json; charset=utf-8",
      "date": "Tue, 20 Jan 2026 04:55:38 GMT",
      "etag": "\"6d5ce75d0d1d5296a0f76f9a58267de603ba0922a8d16cdf24c4b2f59265fd9e\"",
      "github-authentication-token-expiration": "2026-02-19 04:41:20 UTC",
      "last-modified": "Tue, 20 Jan 2026 03:08:43 GMT",
      "referrer-policy": "origin-when-cross-origin, strict-origin-when-cross-origin",
      "server": "github.com",
      "strict-transport-security": "max-age=31536000; includeSubdomains; preload",
      "vary": "Accept, Authorization, Cookie, X-GitHub-OTP,Accept-Encoding, Accept, X-Requested-With",
      "x-accepted-oauth-scopes": "",
      "x-content-type-options": "nosniff",
      "x-frame-options": "deny",
      "x-github-api-version-selected": "2022-11-28",
      "x-github-media-type": "github.v3; format=json",
      "x-github-request-id": "DBAB:37BFB7:160EE00:1F19E9E:696F0AC9",
      "x-oauth-scopes": "repo",
      "x-ratelimit-limit": "5000",
      "x-ratelimit-remaining": "4966",
      "x-ratelimit-reset": "1768885989",
      "x-ratelimit-resource": "core",
      "x-ratelimit-used": "34",
      "x-xss-protection": "0"
    },
    "json": [
      {
        "additions": 2,
        "blob_url": "https://github.com/openai/openai-agents-python/blob/a43f9a3efa004891523ca7c529387b37c2d29dcf/src%2Fagents%2Frun.py",
        "changes": 12,
        "contents_url": "https://api.github.com/repos/openai/openai-agents-python/contents/src%2Fagents%2Frun.py?ref=a43f9a3efa004891523ca7c529387b37c2d29dcf",
        "deletions": 10,
        "filename": "src/agents/run.py",
        "patch": "@@ -2056,23 +2056,15 @@ async def _prepare_input_with_session(\n         if session is None:\n             return input\n \n-        # If the user doesn't specify an input callback and pass a list as input\n-        if isinstance(input, list) and not session_input_callback:\n-            raise UserError(\n-                \"When using session memory, list inputs require a \"\n-                \"`RunConfig.session_input_callback` to define how they should be merged \"\n-                \"with the conversation history. If you don't want to use a callback, \"\n-                \"provide your input as a string instead, or disable session memory \"\n-                \"(session=None) and pass a list to manage the history manually.\"\n-            )\n-\n         # Get previous conversation history\n         history = await session.get_items()\n \n         # Convert input to list format\n         new_input_list = ItemHelpers.input_to_new_input_list(input)\n \n         if session_input_callback is None:\n+            # Historically we rejected list inputs without an explicit callback to avoid\n+            # ambiguous merges; the default now appends new items to history for ergonomics.\n             return history + new_input_list\n         elif callable(session_input_callback):\n             res = session_input_callback(history, new_input_list)",
        "raw_url": "https://github.com/openai/openai-agents-python/raw/a43f9a3efa004891523ca7c529387b37c2d29dcf/src%2Fagents%2Frun.py",
        "sha": "0698d13b29d201c3e25b2065bce5ce068da63c17",
        "status": "modified"
      },
      {
        "additions": 11,
        "blob_url": "https://github.com/openai/openai-agents-python/blob/a43f9a3efa004891523ca7c529387b37c2d29dcf/tests%2Ftest_session.py",
        "changes": 26,
        "contents_url": "https://api.github.com/repos/openai/openai-agents-python/contents/tests%2Ftest_session.py?ref=a43f9a3efa004891523ca7c529387b37c2d29dcf",
        "deletions": 15,
        "filename": "tests/test_session.py",
        "patch": "@@ -7,7 +7,6 @@\n import pytest\n \n from agents import Agent, RunConfig, Runner, SQLiteSession, TResponseInputItem\n-from agents.exceptions import UserError\n \n from .fake_model import FakeModel\n from .test_responses import get_text_message\n@@ -371,10 +370,8 @@ async def test_sqlite_session_get_items_with_limit():\n \n @pytest.mark.parametrize(\"runner_method\", [\"run\", \"run_sync\", \"run_streamed\"])\n @pytest.mark.asyncio\n-async def test_session_memory_rejects_both_session_and_list_input(runner_method):\n-    \"\"\"Test that passing both a session and list input raises a UserError across all runner\n-    methods.\n-    \"\"\"\n+async def test_session_memory_appends_list_input_by_default(runner_method):\n+    \"\"\"Test that list inputs are appended to session history when no callback is provided.\"\"\"\n     with tempfile.TemporaryDirectory() as temp_dir:\n         db_path = Path(temp_dir) / \"test_validation.db\"\n         session_id = \"test_validation_parametrized\"\n@@ -383,19 +380,18 @@ async def test_session_memory_rejects_both_session_and_list_input(runner_method)\n         model = FakeModel()\n         agent = Agent(name=\"test\", model=model)\n \n-        # Test that providing both a session and a list input raises a UserError\n-        model.set_next_output([get_text_message(\"This shouldn't run\")])\n-\n-        list_input = [\n-            {\"role\": \"user\", \"content\": \"Test message\"},\n+        initial_history: list[TResponseInputItem] = [\n+            {\"role\": \"user\", \"content\": \"Earlier message\"},\n+            {\"role\": \"assistant\", \"content\": \"Saved reply\"},\n         ]\n+        await session.add_items(initial_history)\n+\n+        list_input = [{\"role\": \"user\", \"content\": \"Test message\"}]\n \n-        with pytest.raises(UserError) as exc_info:\n-            await run_agent_async(runner_method, agent, list_input, session=session)\n+        model.set_next_output([get_text_message(\"This should run\")])\n+        await run_agent_async(runner_method, agent, list_input, session=session)\n \n-        # Verify the error message explains the issue\n-        assert \"list inputs require a `RunConfig.session_input_callback\" in str(exc_info.value)\n-        assert \"to manage the history manually\" in str(exc_info.value)\n+        assert model.last_turn_args[\"input\"] == initial_history + list_input\n \n         session.close()\n ",
        "raw_url": "https://github.com/openai/openai-agents-python/raw/a43f9a3efa004891523ca7c529387b37c2d29dcf/tests%2Ftest_session.py",
        "sha": "305248eda5a0388c98e3b5d9d41fc1baa3861b32",
        "status": "modified"
      }
    ],
    "status": 200
  },
  "started_at": "2026-01-20T04:55:37.564044Z"
}
